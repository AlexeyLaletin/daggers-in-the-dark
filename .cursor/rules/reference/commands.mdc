---
description: Quick reference for common development commands (ruff, mypy, pytest, git)
alwaysApply: false
---
# Commands Reference

**Purpose:** Centralized reference for common development commands used in this repository.

**When to use:** When you need to find a specific command quickly. For detailed explanations, see guides in `.cursor/rules/`.

**Related:**
- Setup: `.cursor/rules/setup/python_tools.mdc`
- Workflows: `.cursor/rules/setup/validation.mdc`

## Python: uv + python3 (Repository Standard)

- **MUST**: Use `python3` (and `python3 -m ...`) when invoking the interpreter. Do **not** rely on `python`.
- **SHOULD**: Prefer `uv run ...` for running Python tools (no need to activate `.venv`).
- **SHOULD**: Use `uv` for dependency installs:
  - If `uv.lock` exists: `uv sync --locked --dev --all-extras`
  - If there is **no** lockfile yet: `uv venv` then `uv pip install -e ".[dev]"` (this repo uses extras `dev`)

## Code Validation Commands

### Ruff (Linting and Formatting)

```bash
# Check code for issues
uv run ruff check .

# Check specific file or directory
uv run ruff check path/to/file.py
uv run ruff check src/

# Auto-fix issues where possible
uv run ruff check --fix .

# Format code
uv run ruff format .

# Format specific file
uv run ruff format path/to/file.py

# Check and format in one command
uv run ruff check --fix . && uv run ruff format .

# Format check (fail if not formatted, for CI)
uv run ruff format --check .
```

### Mypy (Type Checking)

```bash
# Type check all files
uv run mypy .

# Type check specific file
uv run mypy path/to/file.py

# Type check with specific config
uv run mypy --config-file mypy.ini .

# Type check with error codes
uv run mypy --show-error-codes .

# Type check and show coverage
uv run mypy --show-error-codes --pretty .
```

### Pre-commit (All Hooks)

```bash
# Run all pre-commit hooks on all files
pre-commit run --all-files

# Run hooks on staged files only
pre-commit run

# Run specific hook
pre-commit run ruff --all-files
pre-commit run mypy --all-files
pre-commit run ruff-format --all-files

# Run hooks on specific file
pre-commit run --files path/to/file.py

# Install hooks
pre-commit install
pre-commit install --hook-type commit-msg
```

## Testing Commands

### Pytest Commands

```bash
# Run all tests
uv run pytest

# Run tests in specific directory
uv run pytest tests/

# Run specific test file
uv run pytest tests/test_module.py

# Run specific test function
uv run pytest tests/test_module.py::test_function_name

# Run tests matching pattern
uv run pytest -k "test_pattern"

# Run tests with verbose output
uv run pytest -v
uv run pytest -vv  # Extra verbose

# Run tests and show print statements
uv run pytest -s

# Run tests and stop on first failure
uv run pytest -x

# Run tests with coverage
uv run pytest --cov=src tests/
uv run pytest --cov=src --cov-report=html tests/
uv run pytest --cov=src --cov-report=xml tests/  # For CI

# Run tests in parallel
uv run pytest -n auto

# Run tests matching tags
uv run pytest -m "slow"        # Run tests marked as slow
uv run pytest -m "not slow"    # Skip slow tests
uv run pytest -m integration   # Run integration tests
uv run pytest -m e2e           # Run e2e tests
```

## Frontend / Node.js Commands

### Package Managers
```bash
# Install dependencies
npm ci
npm install
yarn install --frozen-lockfile
pnpm install --frozen-lockfile
```

### Common Scripts
```bash
# Lint
npm run lint

# Format (check / write)
npm run format:check
npm run format

# Typecheck
npm run typecheck

# Unit/component tests
npm test

# Build
npm run build
```

## Git Version Control Commands

### Status and Information
```bash
git status                 # Show working tree status
git diff                   # Show changes
git log --oneline --decorate --graph -n 20
git branch                 # List local branches
```

### Branch Operations
```bash
git switch -c name         # Create and switch to branch
git switch name            # Switch to branch
git branch -D name         # Delete local branch (force)
```

### Committing
```bash
git add path/to/file
git commit -m "message"
git commit --amend
```

### Updating
```bash
git fetch --all --prune
git pull --rebase
```

## Common Workflows

### Complete Validation (Before Commit)
```bash
uv run ruff check --fix . && uv run ruff format . && uv run mypy . && uv run pytest
```

### Complete Validation (Before Push)
```bash
uv run ruff check --fix . && uv run ruff format . && uv run mypy . && uv run pytest
```

### CI/CD Pipeline
```bash
uv run ruff format --check .                     # Fail if not formatted
uv run ruff check .                              # Lint check
uv run mypy .                                    # Type check
uv run pytest --cov=src --cov-report=xml tests/  # Tests with coverage
```

## Quick Reference

### Most Common Commands
```bash
uv run ruff check --fix .   # Lint and auto-fix
uv run ruff format .        # Format code
uv run mypy .               # Type check
uv run pytest               # Run all tests
git status                  # Check status
git commit -m "message"     # Commit changes
```
